{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pc\\\\Desktop\\\\live-code-editor\\\\client\\\\src\\\\components\\\\AllProjects.js\",\n    _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport '../styles/AllProjects.css';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useEffect, useState } from 'react';\nimport Loading from './LoadingAnimation';\nimport DeleteProjectWindow from \"../components/DeleteProjectWindow\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AllProjects = props => {\n  _s();\n\n  const [renderState, setRenderState] = useState(false);\n  const navigate = useNavigate();\n  const {\n    currentUser\n  } = useAuth();\n  const [showWindow, setShowWindow] = useState(\"first\");\n  const [projectList, setProjectList] = useState(null);\n  const [recentlyProjects, setRecentlyProjects] = useState(null);\n  const [projectName, setProjectName] = useState(\"\");\n  const oneMin = 1000 * 60;\n  const oneHour = oneMin * 60;\n  const oneDay = oneHour * 24;\n  useEffect(() => {\n    if (!(currentUser !== null && currentUser !== void 0 && currentUser.loading)) {\n      axios.get(\"/all-projects/\" + currentUser.email).then(res => {\n        let projects = res.data.projects;\n        let result = projects.filter(project => {\n          return project.projectName.indexOf(props.searchValue) !== -1 || project.language.indexOf(props.searchValue) !== -1;\n        });\n        projects.sort((a, b) => new Date(b.updatedAt) - new Date(a.updatedAt));\n        setRecentlyProjects(projects.slice(0, 3));\n        setProjectList(result);\n\n        if (props.searchValue === \"\") {\n          document.querySelector(\"#all-project-title\").innerHTML = \"All Projects\";\n        } else {\n          document.querySelector(\"#all-project-title\").innerHTML = \"Result\";\n        }\n\n        if (props.searchValue === \"\" && result.length === 0) {\n          document.querySelector(\"#result-placeholder\").innerHTML = \"Doesn't have any project yet\";\n        } else {\n          document.querySelector(\"#result-placeholder\").innerHTML = \"No match\";\n        }\n      }).catch(err => console.log(err));\n    }\n  }, [currentUser, renderState, props.searchValue]);\n\n  function calculatePassedDays(date) {\n    date = new Date(date).getTime();\n    let today = Date.now();\n    let passedDay = Math.floor((today - date) / oneDay);\n    let passedHour = Math.floor((today - (date + passedDay * oneDay)) / oneHour);\n    let passedMin = Math.floor((today - (date + passedHour * oneHour)) / oneMin);\n    let minText = passedMin < 2 ? \"Just now\" : passedMin + \" mins before\";\n    if (passedHour == 0) return minText;\n    let hourText = passedHour !== 0 ? passedHour + \" hours before\" : passedMin;\n    return passedDay === 0 ? hourText : passedDay + \" days \" + hourText;\n  }\n\n  function handleCodeThis(e, project) {\n    navigate(\"/playground/\" + project._id, {\n      state: {\n        projectName: project.projectName,\n        language: project.language,\n        code: project.text\n      }\n    });\n  }\n\n  function handleDelete(e, project) {\n    setProjectName(project.projectName);\n    setShowWindow(!showWindow);\n  }\n\n  function renderParent() {\n    setRenderState(!renderState);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"all-project-wrapper\",\n    children: [/*#__PURE__*/_jsxDEV(DeleteProjectWindow, {\n      showWindow: showWindow,\n      renderParent: renderParent,\n      username: currentUser.email,\n      projectName: projectName\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this), props.searchValue.length === 0 && /*#__PURE__*/_jsxDEV(\"h1\", {\n      id: \"recently-project-title\",\n      children: \"Recently Updated Projects\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 48\n    }, this), props.searchValue.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"AllProjects-grid-wrapper recently-projects-grid-wrapper\",\n      children: currentUser.loading || !recentlyProjects ? /*#__PURE__*/_jsxDEV(Loading, {\n        color: \"black\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 61\n      }, this) : recentlyProjects.length != 0 ? recentlyProjects.map(project => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"all-project-project-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: project.projectName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Language:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: (\"Language: \", project.language)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Last Updated:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: calculatePassedDays(project.updatedAt)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Project created at:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: new Date(project.updatedAt).toLocaleDateString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"all-project-button-div\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"all-project-button code-this\",\n              onClick: e => handleCodeThis(e, project),\n              children: \"Code this\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"all-project-button delete\",\n              onClick: e => handleDelete(e, project),\n              children: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 29\n          }, this)]\n        }, project.projectName, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 32\n        }, this);\n      }) : /*#__PURE__*/_jsxDEV(\"p\", {\n        id: \"result-placeholder\",\n        children: \"Doesn't have any project yet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 26\n      }, this)\n    }, \"recently-project-grid-wrapper\", false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 48\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      id: \"all-project-title\",\n      children: \"All Projects\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"AllProjects-grid-wrapper\",\n      children: currentUser.loading || !projectList ? /*#__PURE__*/_jsxDEV(Loading, {\n        color: \"black\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 56\n      }, this) : projectList.length != 0 ? projectList.map(project => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"all-project-project-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: project.projectName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Language:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: (\"Language: \", project.language)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Last Updated:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: calculatePassedDays(project.updatedAt)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Project created at:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: new Date(project.updatedAt).toLocaleDateString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"all-project-button-div\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"all-project-button code-this\",\n              onClick: e => handleCodeThis(e, project),\n              children: \"Code this\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"all-project-button delete\",\n              onClick: e => handleDelete(e, project),\n              children: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 29\n          }, this)]\n        }, project.projectName, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 32\n        }, this);\n      }) : /*#__PURE__*/_jsxDEV(\"p\", {\n        id: \"result-placeholder\",\n        children: \"Doesn't have any project yet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 26\n      }, this)\n    }, \"all-project-grid-wrapper\", false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 9\n  }, this);\n};\n\n_s(AllProjects, \"XhLu1TML6f7SMpS3Rm0v0Qi8Ayk=\", false, function () {\n  return [useNavigate, useAuth];\n});\n\n_c = AllProjects;\nexport default AllProjects;\n\nvar _c;\n\n$RefreshReg$(_c, \"AllProjects\");","map":{"version":3,"sources":["C:/Users/pc/Desktop/live-code-editor/client/src/components/AllProjects.js"],"names":["axios","useNavigate","useAuth","useEffect","useState","Loading","DeleteProjectWindow","AllProjects","props","renderState","setRenderState","navigate","currentUser","showWindow","setShowWindow","projectList","setProjectList","recentlyProjects","setRecentlyProjects","projectName","setProjectName","oneMin","oneHour","oneDay","loading","get","email","then","res","projects","data","result","filter","project","indexOf","searchValue","language","sort","a","b","Date","updatedAt","slice","document","querySelector","innerHTML","length","catch","err","console","log","calculatePassedDays","date","getTime","today","now","passedDay","Math","floor","passedHour","passedMin","minText","hourText","handleCodeThis","e","_id","state","code","text","handleDelete","renderParent","map","toLocaleDateString"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport '../styles/AllProjects.css';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { useEffect, useState } from 'react';\r\nimport Loading from './LoadingAnimation';\r\nimport DeleteProjectWindow from \"../components/DeleteProjectWindow\";\r\n\r\nconst AllProjects = (props) => {\r\n    const [renderState, setRenderState] = useState(false);\r\n    const navigate = useNavigate();\r\n    const { currentUser } = useAuth();\r\n    const [showWindow, setShowWindow] = useState(\"first\");\r\n    const [projectList, setProjectList] = useState(null);\r\n    const [recentlyProjects, setRecentlyProjects] = useState(null);\r\n    const [projectName, setProjectName] = useState(\"\");\r\n\r\n    const oneMin = 1000 * 60;\r\n    const oneHour = oneMin * 60;\r\n    const oneDay = oneHour * 24;\r\n\r\n    useEffect(() => {\r\n        if (!currentUser?.loading) {\r\n            axios.get(\"/all-projects/\" + currentUser.email).then(\r\n                res => {\r\n                    let projects = res.data.projects;\r\n\r\n                    let result = projects.filter(project => {\r\n                        return project.projectName.indexOf(props.searchValue) !== -1\r\n                            || project.language.indexOf(props.searchValue) !== -1;\r\n                    })\r\n\r\n                    projects.sort((a, b) => new Date(b.updatedAt) - new Date(a.updatedAt));\r\n\r\n                    setRecentlyProjects(projects.slice(0, 3));\r\n                    setProjectList(result);\r\n                    if (props.searchValue === \"\") {\r\n                        document.querySelector(\"#all-project-title\").innerHTML = \"All Projects\";\r\n                    } else {\r\n                        document.querySelector(\"#all-project-title\").innerHTML = \"Result\";\r\n                    }\r\n                    if (props.searchValue === \"\" && result.length === 0) {\r\n                        document.querySelector(\"#result-placeholder\").innerHTML = \"Doesn't have any project yet\";\r\n                    } else {\r\n                        document.querySelector(\"#result-placeholder\").innerHTML = \"No match\";\r\n                    }\r\n                }).\r\n                catch(err => console.log(err));\r\n        }\r\n    }, [currentUser, renderState, props.searchValue]);\r\n\r\n    function calculatePassedDays(date) {\r\n        date = new Date(date).getTime();\r\n        let today = Date.now();\r\n        let passedDay = Math.floor((today - date) / oneDay);\r\n        let passedHour = Math.floor((today - (date + passedDay * oneDay)) / oneHour);\r\n        let passedMin = Math.floor((today - (date + passedHour * oneHour)) / oneMin);\r\n        let minText = passedMin < 2 ? \"Just now\" : passedMin + \" mins before\";\r\n        if (passedHour == 0) return minText;\r\n        let hourText = passedHour !== 0 ? passedHour + \" hours before\" : passedMin;\r\n        return passedDay === 0 ? hourText : passedDay + \" days \" + hourText;\r\n    }\r\n\r\n    function handleCodeThis(e, project) {\r\n        navigate(\"/playground/\" + project._id,\r\n            {\r\n                state: {\r\n                    projectName: project.projectName,\r\n                    language: project.language,\r\n                    code: project.text\r\n                }\r\n            });\r\n    }\r\n\r\n    function handleDelete(e, project) {\r\n        setProjectName(project.projectName);\r\n        setShowWindow(!showWindow);\r\n    }\r\n\r\n    function renderParent() {\r\n        setRenderState(!renderState);\r\n    }\r\n    return (\r\n        <div id=\"all-project-wrapper\">\r\n            <DeleteProjectWindow showWindow={showWindow} renderParent={renderParent}\r\n                username={currentUser.email} projectName={projectName} />\r\n\r\n\r\n            {props.searchValue.length === 0 && <h1 id=\"recently-project-title\">Recently Updated Projects</h1>}\r\n            {props.searchValue.length === 0 && <div key=\"recently-project-grid-wrapper\" className=\"AllProjects-grid-wrapper recently-projects-grid-wrapper\">\r\n                {currentUser.loading || !recentlyProjects ? <Loading color=\"black\" /> : recentlyProjects.length != 0 ?\r\n                    recentlyProjects.map(project => {\r\n                        return <div className=\"all-project-project-card\" key={project.projectName}>\r\n                            <h3>{project.projectName}</h3>\r\n                            <h4>{\"Language:\"}</h4>\r\n                            <p>{\"Language: \", project.language}</p>\r\n                            <h4>{\"Last Updated:\"}</h4>\r\n                            <p>{calculatePassedDays(project.updatedAt)}</p>\r\n                            <h4>{\"Project created at:\"}</h4>\r\n                            <p>{new Date(project.updatedAt).toLocaleDateString()}</p>\r\n                            <div className=\"all-project-button-div\">\r\n                                <button className='all-project-button code-this' onClick={(e) => handleCodeThis(e, project)}>Code this</button>\r\n                                <button className='all-project-button delete' onClick={(e) => handleDelete(e, project)}>Delete</button>\r\n                            </div>\r\n                        </div>\r\n                    }) : <p id=\"result-placeholder\">Doesn't have any project yet</p>}\r\n            </div>}\r\n\r\n\r\n\r\n            <h1 id=\"all-project-title\">All Projects</h1>\r\n            <div key=\"all-project-grid-wrapper\" className=\"AllProjects-grid-wrapper\">\r\n                {currentUser.loading || !projectList ? <Loading color=\"black\" /> : projectList.length != 0 ?\r\n                    projectList.map(project => {\r\n                        return <div className=\"all-project-project-card\" key={project.projectName}>\r\n                            <h3>{project.projectName}</h3>\r\n                            <h4>{\"Language:\"}</h4>\r\n                            <p>{\"Language: \", project.language}</p>\r\n                            <h4>{\"Last Updated:\"}</h4>\r\n                            <p>{calculatePassedDays(project.updatedAt)}</p>\r\n                            <h4>{\"Project created at:\"}</h4>\r\n                            <p>{new Date(project.updatedAt).toLocaleDateString()}</p>\r\n                            <div className=\"all-project-button-div\">\r\n                                <button className='all-project-button code-this' onClick={(e) => handleCodeThis(e, project)}>Code this</button>\r\n                                <button className='all-project-button delete' onClick={(e) => handleDelete(e, project)}>Delete</button>\r\n                            </div>\r\n                        </div>\r\n                    }) : <p id=\"result-placeholder\">Doesn't have any project yet</p>}\r\n            </div>\r\n        </div >\r\n    );\r\n}\r\n\r\nexport default AllProjects;"]},"metadata":{},"sourceType":"module"}