{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pc\\\\Desktop\\\\live-code-editor\\\\client\\\\src\\\\components\\\\ChangeableTitle.js\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { useMessageBox } from \"../contexts/MessageBox\";\nimport qs from 'qs';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ChangeableTitle = props => {\n  _s();\n\n  const [title, setTitle] = useState(props.title ? props.title : \"Untitled-1\");\n  const {\n    setMessageBox\n  } = useMessageBox();\n  const [oldTitle, setOldTitle] = useState(props.title ? props.title : \"Untitled-1\");\n  useEffect(() => {\n    // console.log(props.title);\n    document.getElementById(\"changeable-title\").style.width = props.title.length + \"ch\";\n    setTitle(props.title);\n  }, [props.title]);\n\n  function handleChange(e) {\n    // if (e.target.style.width < \"4ch\") e.target.style.width = \"3ch\";\n    if (e.target.value.length < 4) e.target.style.width = \"4ch\";else e.target.style.width = e.target.value.length + 2 + \"ch\";\n    setTitle(e.target.value);\n  }\n\n  function handleOnFocus() {\n    setOldTitle(title);\n  }\n\n  function handleOnBlur() {\n    if (title == \"\") {\n      setMessageBox(\"Project title cannot be empty\", \"red\");\n      let el = document.getElementById(\"changeable-title\");\n      el.style.width = oldTitle.length + 2 + \"ch\";\n      setTitle(oldTitle);\n    } else if (title == oldTitle) return;else {\n      if (props.projectId !== \"Proxy project\") {\n        const data = {\n          projectName: title\n        };\n        const options = {\n          method: 'PUT',\n          headers: {\n            'content-type': 'application/x-www-form-urlencoded'\n          },\n          data: qs.stringify(data),\n          url: \"/update-projectName/\" + props.currentUserName + \"/\" + props.projectId\n        };\n        axios(options).then(res => {\n          // console.log(res);\n          setMessageBox(res.data, \"lightgreen\");\n          props.parentProjectName(title);\n        }).catch(err => {\n          // console.log(err.response)\n          console.log(err);\n          setMessageBox(err.response.data, \"red\");\n          let el = document.getElementById(\"changeable-title\");\n          el.style.width = oldTitle.length + \"ch\";\n          setTitle(oldTitle);\n        });\n      } else props.parentProjectName(title);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"input\", {\n    type: \"text\",\n    name: \"project-title\",\n    id: \"changeable-title\",\n    value: title,\n    onChange: handleChange,\n    onBlur: handleOnBlur,\n    onFocus: handleOnFocus,\n    autoComplete: \"off\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ChangeableTitle, \"MagKEdNFQq5IWKan8FhTNOaC5AU=\", false, function () {\n  return [useMessageBox];\n});\n\n_c = ChangeableTitle;\nexport default ChangeableTitle;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChangeableTitle\");","map":{"version":3,"sources":["C:/Users/pc/Desktop/live-code-editor/client/src/components/ChangeableTitle.js"],"names":["axios","useEffect","useState","useMessageBox","qs","ChangeableTitle","props","title","setTitle","setMessageBox","oldTitle","setOldTitle","document","getElementById","style","width","length","handleChange","e","target","value","handleOnFocus","handleOnBlur","el","projectId","data","projectName","options","method","headers","stringify","url","currentUserName","then","res","parentProjectName","catch","err","console","log","response"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useMessageBox } from \"../contexts/MessageBox\";\r\nimport qs from 'qs';\r\n\r\nconst ChangeableTitle = (props) => {\r\n    const [title, setTitle] = useState(props.title ? props.title : \"Untitled-1\");\r\n    const { setMessageBox } = useMessageBox();\r\n    const [oldTitle, setOldTitle] = useState(props.title ? props.title : \"Untitled-1\");\r\n\r\n    useEffect(() => {\r\n        // console.log(props.title);\r\n        document.getElementById(\"changeable-title\").style.width = props.title.length + \"ch\";\r\n        setTitle(props.title);\r\n    }, [props.title]);\r\n\r\n    function handleChange(e) {\r\n        // if (e.target.style.width < \"4ch\") e.target.style.width = \"3ch\";\r\n        if (e.target.value.length < 4) e.target.style.width = \"4ch\";\r\n        else e.target.style.width = e.target.value.length + 2 + \"ch\";\r\n        setTitle(e.target.value);\r\n    }\r\n\r\n    function handleOnFocus() {\r\n        setOldTitle(title);\r\n    }\r\n\r\n    function handleOnBlur() {\r\n        if (title == \"\") {\r\n            setMessageBox(\"Project title cannot be empty\", \"red\");\r\n            let el = document.getElementById(\"changeable-title\");\r\n            el.style.width = oldTitle.length + 2 + \"ch\";\r\n            setTitle(oldTitle);\r\n        } else if (title == oldTitle) return;\r\n        else {\r\n            if (props.projectId !== \"Proxy project\") {\r\n                const data = { projectName: title };\r\n                const options = {\r\n                    method: 'PUT',\r\n                    headers: { 'content-type': 'application/x-www-form-urlencoded' },\r\n                    data: qs.stringify(data),\r\n                    url: \"/update-projectName/\" + props.currentUserName + \"/\" + props.projectId\r\n                };\r\n                axios(options).then(\r\n                    res => {\r\n                        // console.log(res);\r\n                        setMessageBox(res.data, \"lightgreen\");\r\n                        props.parentProjectName(title);\r\n                    }).\r\n                    catch(err => {\r\n                        // console.log(err.response)\r\n                        console.log(err);\r\n                        setMessageBox(err.response.data, \"red\");\r\n                        let el = document.getElementById(\"changeable-title\");\r\n                        el.style.width = oldTitle.length + \"ch\";\r\n                        setTitle(oldTitle);\r\n                    });\r\n            } else props.parentProjectName(title);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <input type=\"text\" name=\"project-title\"\r\n            id=\"changeable-title\" value={title}\r\n            onChange={handleChange} onBlur={handleOnBlur}\r\n            onFocus={handleOnFocus} autoComplete=\"off\"\r\n        />);\r\n}\r\n\r\nexport default ChangeableTitle;"]},"metadata":{},"sourceType":"module"}